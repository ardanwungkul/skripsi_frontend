import{n as x,k as i,l as w,o as b,j as d,a as c,b as y,w as D,aX as k,d as s,h as p,p as M,F as B,y as T,z as C,N as $,K as F,u as K,t as f}from"./index-3f1fe31d.js";import{P as U}from"./pusher-1f269e1c.js";import{_ as j}from"./UserLayout-2fddb6a7.js";const z={class:"pt-28 pb-20 max-w-6xl mx-auto w-full"},E={class:"border p-3 h-full bg-white rounded-lg shadow-lg space-y-2"},H={class:"flex gap-1"},N={class:"text-[10px] text-gray-200 ml-3 self-end"},P={class:"w-full"},R={class:"flex items-center w-full gap-3"},S=s("i",{class:"fa-solid fa-paper-plane-top"},null,-1),V=[S],G={__name:"Chatbox",setup(A){const t=x(),n=i([]),l=i(""),r=i(null);var h=new U("511534a0c376ec5d7819",{cluster:"mt1"}),g=h.subscribe("chat");g.bind("App\\Events\\MessageSent",function(e){e.message.sender_id!==t.userData.id&&n.value.push(e.message)});const u=()=>{const e=new FormData;e.append("message",l.value),e.append("sender_id",t.userData.id),l.value.trim()!==""&&d.post("/api/messages/user/",e).then(a=>{n.value.push(a.data),l.value=""})},m=()=>{k(()=>{r.value&&(r.value.scrollTop=r.value.scrollHeight)})},_=e=>{const a=new Date(e);return`${a.getHours()}:${a.getMinutes()}`};return w(()=>{t.hasUserData||t.getData()}),b(async()=>{d.get(`/api/messages/user/${t.userData.id}`).then(e=>{n.value=e.data,m()})}),(e,a)=>(c(),y(j,null,{default:D(()=>[s("div",z,[s("div",E,[s("div",{class:"chat-messages flex flex-col items-start gap-1 p-4 overflow-y-scroll h-[70vh] invisible-scrollbar",ref_key:"chatMessagesRef",ref:r},[(c(!0),p(B,null,M(n.value,(o,v)=>(c(),p("div",{key:v,class:F([K(t).userData.id==o.sender_id?"self-end bg-[#005c4b]":"self-start bg-[#353535]","text-white px-3 py-2 rounded-lg max-w-2xl"])},[s("div",H,[s("p",null,f(o.text),1),s("span",N,f(_(o.created_at)),1)])],2))),128))],512),s("div",P,[s("div",R,[T(s("input",{class:"w-full rounded-lg bg-gray-200 shadow-lg","onUpdate:modelValue":a[0]||(a[0]=o=>l.value=o),onKeyup:$(u,["enter"]),placeholder:"Type a message..."},null,544),[[C,l.value]]),s("button",{onClick:u,class:"p-3 rounded-lg break-words flex items-center justify-center bg-[#005c4b] text-white h-full"},V)])])])])]),_:1}))}};export{G as default};
