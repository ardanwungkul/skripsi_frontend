import{i as l,j as i}from"./index-3f1fe31d.js";const n=()=>i.get("/sanctum/csrf-cookie"),d=l({id:"domain",state:()=>({create:[],edit:[],domains:[],loading:!1,error:null,domain:{}}),getters:{allData:t=>t.domains,isLoading:t=>t.loading,getError:t=>t.error},actions:{async getData(){this.loading=!0;try{const t=await i.get("/api/domain").then(a=>{this.domains=a.data})}catch(t){this.error=t}finally{this.loading=!1}},async getDataCreate(){this.loading=!0;try{const t=await i.get("/api/domain/create").then(a=>{this.create=a.data})}catch(t){this.error=t}finally{this.loading=!1}},async getDataEdit(t){this.loading=!0;try{const a=await i.get(`/api/domain/${t}/edit`).then(e=>{this.edit=e.data})}catch(a){this.error=a}finally{this.loading=!1}},async getDataByUserId(t){this.loading=!0;try{const a=await i.get(`/api/domain-by-user-id/${t}`).then(e=>{this.domains=e.data})}catch(a){this.error=a}finally{this.loading=!1}},async getDataById(t){this.loading=!0;try{const a=await i.get(`/api/domain/${t}`);a.status===200?this.domain=a.data:this.domain={}}catch(a){a.response&&a.response.status===404?this.domain={}:this.error=a}finally{this.loading=!1}},async addData(t,a,e){await n(),e.value=!0,i.post("/api/domain",t).then(s=>{e.value=!1,this.domains.push(s.data),this.router.push({name:"domain.index"}),console.log(s)}).catch(s=>{if(console.log(s),s.response.status==500&&(a.value=Object.values([s.response.data.message])),s.response.status!==422)throw s;a.value=Object.values(s.response.data.errors).flat(),e.value=!1})},async editData(t,a,e,s){await n(),e.value=!0,i.post(`/api/domain/${s}`,t).then(o=>{e.value=!1,this.router.push({name:"domain.index"}),console.log(o)}).catch(o=>{if(console.log(o),o.response.status!==422)throw o;a.value=Object.values(o.response.data.errors).flat(),e.value=!1})},async deleteData(t,a){await n(),a.value=!0;try{const e=await i.delete(`/api/domain/${t}`);this.domains=this.domains.filter(s=>s.id!==t),a.value=!1}catch(e){this.error=e,console.log(this.error),a.value=!1}finally{a.value=!1}}}});export{d};
