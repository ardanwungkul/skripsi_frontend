import{i as o,j as l}from"./index-638c9339.js";const r=()=>l.get("/sanctum/csrf-cookie"),h=o({id:"template",state:()=>({templates:[],loading:!1,error:null,template:{},create:[],edit:[]}),getters:{allData:t=>t.templates,isLoading:t=>t.loading,getError:t=>t.error},actions:{async getData(){this.loading=!0;try{const t=await l.get("/api/template").then(e=>{this.templates=e.data})}catch(t){this.error=t}finally{this.loading=!1}},async getDataCreate(){this.loading=!0;try{const t=await l.get("/api/template/create").then(e=>{this.create=e.data})}catch(t){this.error=t}finally{this.loading=!1}},async getDataEdit(t){this.loading=!0;try{const e=await l.get(`/api/template/${t}/edit`).then(a=>{this.edit=a.data})}catch(e){this.error=e}finally{this.loading=!1}},async getDataById(t){this.loading=!0;try{const e=await l.get(`/api/template/${t}`);e.status===200?this.template=e.data:this.template={}}catch(e){e.response&&e.response.status===404?this.template={}:this.error=e}finally{this.loading=!1}},async addData(t,e,a){await r(),a.value=!0,l.post("/api/template",t).then(s=>{a.value=!1,this.templates.push(s.data),this.router.push({name:"admin.template.index"}),console.log(s)}).catch(s=>{if(console.log(s),s.response.status!==422)throw s;e.value=Object.values(s.response.data.errors).flat(),a.value=!1})},async editData(t,e,a,s){await r(),a.value=!0,l.post(`/api/template/${s}`,t).then(i=>{this.router.push({name:"admin.template.index"}),a.value=!1}).catch(i=>{if(console.log(i),i.response.status!==422)throw i;e.value=Object.values(i.response.data.errors).flat(),a.value=!1})},async deleteData(t,e){await r(),e.value=!0;try{const a=await l.delete(`/api/template/${t}`);this.templates=this.templates.filter(s=>s.id!==t),e.value=!1}catch(a){this.error=a,console.log(this.error),e.value=!1}finally{e.value=!1}}}});export{h as t};
