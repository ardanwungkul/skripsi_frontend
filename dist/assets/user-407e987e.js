import{i as o,j as r}from"./index-3f1fe31d.js";const i=()=>r.get("/sanctum/csrf-cookie"),n=o({id:"user",state:()=>({edit:[],users:[],loading:!1,error:null,user:{}}),getters:{allData:s=>s.users,isLoading:s=>s.loading,getError:s=>s.error},actions:{async getData(){this.loading=!0;try{const s=await r.get("/api/users").then(e=>{this.users=e.data})}catch(s){this.error=s}finally{this.loading=!1}},async getDataEdit(s){this.loading=!0;try{const e=await r.get(`/api/users/${s}/edit`).then(a=>{this.edit=a.data})}catch(e){this.error=e}finally{this.loading=!1}},async getDataById(s){this.loading=!0;try{const e=await r.get(`/api/users/${s}`);e.status===200?this.user=e.data:this.user={}}catch(e){e.response&&e.response.status===404?this.user={}:this.error=e}finally{this.loading=!1}},async addData(s,e,a){await i(),a.value=!0,r.post("/api/users",s).then(t=>{a.value=!1,this.users.push(t.data),this.router.push({name:"user.index"}),console.log(t)}).catch(t=>{if(console.log(t),t.response.status!==422)throw t;e.value=Object.values(t.response.data.errors).flat(),a.value=!1})},async editData(s,e,a,t){await i(),a.value=!0,r.post(`/api/users/${t}`,s).then(l=>{a.value=!1,this.router.push({name:"user.index"}),console.log(l)}).catch(l=>{if(console.log(l),l.response.status!==422)throw l;e.value=Object.values(l.response.data.errors).flat(),a.value=!1})},async deleteData(s,e){await i(),e.value=!0;try{const a=await r.delete(`/api/users/${s}`);this.users=this.users.filter(t=>t.id!==s),e.value=!1}catch(a){this.error=a,console.log(this.error),e.value=!1}finally{e.value=!1}}}});export{n as u};
